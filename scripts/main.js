"use strict";window.onload=function(){var t=new Phaser.Game(1400,840,Phaser.CANVAS,"gameContainer");t.state.add("Boot",WebGame.Boot),t.state.add("Preloader",WebGame.Preloader),t.state.add("StartMenu",WebGame.StartMenu),t.state.add("Game",WebGame.Game),t.state.add("GameOver",WebGame.GameOver),t.state.start("Boot")};var WebGame={};WebGame.Boot=function(t){},WebGame.Boot.prototype={preload:function(){this.load.image("preloaderBar","images/loading.png")},create:function(){this.input.maxPointers=1,this.stage.disableVisibilityChange=!1,this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.minWidth=270,this.scale.minHeight=480,this.scale.maxHeight=840,this.scale.maxWidth=1400,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.stage.forcePortrait=!0,this.input.addPointer(),this.stage.backgroundColor="#66ccff",this.state.start("Preloader")}},WebGame.Preloader=function(){this.preloaderBar=null,this.ready=!1,this.levelone=null},WebGame.Preloader.prototype={preload:function(){this.preloaderBar=this.add.sprite(this.world.centerX,this.world.centerY,"preloaderBar"),this.preloaderBar.anchor.setTo(.5),this.load.setPreloadSprite(this.preloaderBar),this.load.image("menu","images/menu.png"),this.load.image("StartButton","images/StartButton.png"),this.load.spritesheet("player","images/p1_spritesheet.png",73,96,-1,0,0),this.load.tilemap("gamemap","images/gamemap.json",null,Phaser.Tilemap.TILED_JSON),this.load.image("tiles_spritesheet","images/tileset/tiles_spritesheet.png"),this.load.audio("music","images/BaseAfterBase.mp3"),this.load.image("enemy","images/slimeWalk1.png"),this.load.image("gameOver","images/gameover.png"),this.load.image("tryAgain","images/tryagain.png"),this.load.image("yes","images/yes.png"),this.load.image("no","images/no.png")},create:function(){this.preloaderBar.cropEnabled=!1},update:function(){this.ready=!0,this.state.start("StartMenu")}},WebGame.StartMenu=function(t){this.startbackground=null,this.startPrompt=null,this.startButton=null},WebGame.StartMenu.prototype={create:function(){this.startbackground=this.add.image(this.world.centerX,this.world.centerY,"menu"),this.startbackground.anchor.setTo(.5),this.startButton=this.add.button(this.world.centerX,this.world.centerY+300,"StartButton",this.startGame,this),this.startButton.anchor.setTo(.5),this.camera.follow(this.startbackground)},startGame:function(t){this.state.start("Game")}},WebGame.Game=function(t){this.map=null,this.layer=null,this.a=null,this.spacePressed=!1,this.music=null,this.text=null,this.enemies=null,this.enemy=null,this.player=null,this.emitter=null},WebGame.Game.prototype={preload:function(){},create:function(){this.physics.startSystem(Phaser.Physics.ARCADE),this.world.enableBody=!0,this.createPlayer(),this.createScore(),this.createMusic(),this.createMap(),this.createEnemies(),this.createEmitter(),this.camera.focusOnXY(448,this.world.centerY/2)},createEmitter:function(){this.emitter=this.add.emitter(this.world.centerX,this.world.centerY,5),this.emitter.makeParticles(["player"]),this.emitter.gravity=100,this.emitter.setAlpha(.3,1,5e3),this.emitter.start(!1,80,10)},createEnemies:function(){this.enemy=this.add.sprite(3045,280,"enemy"),this.enemy.anchor.setTo(.5,1),this.enemy.scale.setTo(1.5),this.enemy.body.immovable=!0},createMap:function(){this.map=this.add.tilemap("gamemap"),this.map.addTilesetImage("tiles_spritesheet","tiles_spritesheet"),this.map.setCollisionBetween(50,90),this.map.setCollisionBetween(104,160),this.layer=this.map.createLayer(0),this.layer.resizeWorld(),this.physics.arcade.enable(this.layer),this.map.setTileIndexCallback(43,this.resetGame,this),this.map.setTileIndexCallback(69,this.resetGame,this),this.map.setTileIndexCallback(81,this.resetGame,this)},createMusic:function(){this.music=this.add.audio("music"),this.music.play()},createScore:function(){var t={font:"32px Arial",fill:"#FFFFFF, wordWrap: true"};this.text=this.add.text(100,100,"Score",t),this.physics.arcade.enable(this.text),this.text.FixedToCamera=!0},createPlayer:function(){this.player=this.add.sprite(128,this.world.centerY/2,"player"),this.player.animations.add("walk",[6,7,8,9,10],5,!0),this.player.animations.add("jump",[15],5,!0),this.physics.arcade.enable(this.player),this.player.body.gravity.y=2100,this.player.body.velocity.x=580,this.player.body.collideWorldBounds=!0;var t=this.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);t.onDown.add(function(){this.spacePressed=!0},this),t.onUp.add(function(){this.spacePressed=!1},this)},jump:function(){0===this.player.body.velocity.y&&(this.player.body.velocity.y=-800)},update:function(){this.camera.focusOnXY(this.player.x+256,this.player.y),this.physics.arcade.collide(this.player,this.layer),this.physics.arcade.overlap(this.player,this.enemy,this.resetGame,null,this),this.spacePressed===!0&&this.jump(),0===this.player.body.velocity.y?this.player.animations.play("walk",10,!1,!1):this.player.animations.play("jump",10,!1,!1),0===this.player.body.velocity.x&&this.resetGame(),this.emitter.minParticleSpeed.set(-this.player.body.velocity.x,-this.player.body.velocity.y),this.emitter.maxParticleSpeed.set(-this.player.body.velocity.x,-this.player.body.velocity.y),this.emitter.emitX=this.player.x,this.emitter.emitY=this.player.y+50},resetGame:function(){this.music.stop(),this.state.start("GameOver")}},WebGame.GameOver=function(t){this.gameOver=null,this.tryAgain=null,this.yes=null,this.no=null},WebGame.GameOver.prototype={create:function(){this.gameOver=this.add.image(this.world.centerX,this.world.centerY-150,"gameOver"),this.gameOver.anchor.setTo(.5),this.camera.follow(this.gameOver),this.tryAgain=this.add.image(this.world.centerX,this.world.centerY+50,"tryAgain"),this.tryAgain.anchor.setTo(.5),this.yes=this.add.button(this.world.centerX-100,this.world.centerY+150,"yes",this.startGame,this),this.yes.anchor.setTo(.5),this.no=this.add.button(this.world.centerX+100,this.world.centerY+150,"no",this.backToMenu,this),this.no.anchor.setTo(.5)},startGame:function(){this.state.start("Game")},backToMenu:function(){this.state.start("StartMenu")}};